(this.webpackJsonptwotter=this.webpackJsonptwotter||[]).push([[0],{17:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},45:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(0),r=s.n(a),i=s(18),o=s.n(i),c=(s(38),s(7)),l=s(8),h=s(6),d=s(10),u=s(9),j=(s.p,s(39),s(40),s(47)),b=s(48),p=s(21),g=(s(30),s(11)),m=s.n(g),O=s(12);function f(){return(f=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/posts");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(O.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/newpost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=s(50);s(17);function C(){return(C=Object(O.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).HideModal=function(){n.props.handleClose()},n.Login=function(e){(function(e){return C.apply(this,arguments)})(e).then((function(e){localStorage.setItem("token",e.token),console.log("TOKEN",e.token),n.onLogin(),n.HideModal()}))},n.state={email:"",password:"",error:""},n.handlePassChange=n.handlePassChange.bind(Object(h.a)(n)),n.handleUserChange=n.handleUserChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.dismissError=n.dismissError.bind(Object(h.a)(n)),n}return Object(l.a)(s,[{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!this.state.email)return this.setState({error:"Username is required"});if(!this.state.password)return this.setState({error:"Password is required"});var t={email:this.state.email,password:this.state.password};return this.Login(t),this.setState({error:""})}},{key:"handleUserChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePassChange",value:function(e){this.setState({password:e.target.value})}},{key:"onLogin",value:function(){this.props.loginHandler()}},{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(x.a,{onSubmit:this.handleSubmit,className:"container",children:[this.state.error&&Object(n.jsxs)("h3",{onClick:this.dismissError,children:[Object(n.jsx)(p.a,{onClick:this.dismissError,children:"X"}),this.state.error]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-25",children:Object(n.jsx)(x.a.Label,{className:"usernameLabel",children:"Email"})}),Object(n.jsx)("div",{className:"col-75",children:Object(n.jsx)(x.a.Control,{className:"username",type:"email",value:this.state.email,onChange:this.handleUserChange})})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-25",children:Object(n.jsx)(x.a.Label,{className:"passwordLabel",children:"Password"})}),Object(n.jsx)("div",{className:"col-75",children:Object(n.jsx)(x.a.Control,{className:"password",type:"password",value:this.state.password,onChange:this.handlePassChange})})]}),Object(n.jsx)(x.a.Control,{className:"submit",type:"submit",value:"Log In"})]})})}}]),s}(a.Component);function y(){return(y=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/logout",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).showModal=function(){n.setState({show:!0})},n.hideModal=function(){n.setState({show:!1})},n.logOut=function(){localStorage.removeItem("token"),function(){return y.apply(this,arguments)}().then((function(e){console.log(e),n.loginHandler()}))},n.loginHandler=function(){n.props.loginHandler()},console.log("Props",n.props),n.state={show:!1},n}return Object(l.a)(s,[{key:"render",value:function(){var e;return console.log("isLoggedIn",this.props.isLoggedIn),e=this.props.isLoggedIn?Object(n.jsx)(p.a,{variant:"outline-info",onClick:this.logOut,children:"Log out"}):Object(n.jsx)(p.a,{variant:"outline-info",onClick:this.showModal,children:"Log in"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(k,{show:this.state.show,handleClose:this.hideModal,loginHandler:this.props.loginHandler}),e]})}}]),s}(a.Component),k=function(e){var t=e.handleClose,s=e.show,a=e.loginHandler,r=s?"modal display-block":"modal display-none";return Object(n.jsx)("div",{className:r,children:Object(n.jsxs)("section",{children:[Object(n.jsx)(w,{loginHandler:a,handleClose:t}),Object(n.jsx)(p.a,{onClick:t,className:"close",children:"X"})]})})},N=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).handleClose=function(){e.props.handleClose()},e.CreatePost=function(t){(function(e){return v.apply(this,arguments)})({title:e.state.title,subject:e.state.subject,user:e.props.displayName}).then((function(t){e.handleClose(),e.reloadPosts(),console.log(t)}))},e.reloadPosts=function(){e.props.getPosts()},e.state={title:"",subject:"",error:"",displayName:""},e.handleTitleChange=e.handleTitleChange.bind(Object(h.a)(e)),e.handleSubjectChange=e.handleSubjectChange.bind(Object(h.a)(e)),e.dismissError=e.dismissError.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e}return Object(l.a)(s,[{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleSubmit",value:function(e){return e.preventDefault(),this.state.title?this.state.subject?(this.CreatePost(),this.setState({error:""})):this.setState({error:"Subject is required"}):this.setState({error:"Title is required"})}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleSubjectChange",value:function(e){this.setState({subject:e.target.value})}},{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"form-are",children:Object(n.jsxs)(x.a,{onSubmit:this.handleSubmit,className:"container",children:[this.state.error&&Object(n.jsxs)("h3",{onClick:this.dismissError,children:[Object(n.jsx)(p.a,{onClick:this.dismissError,children:"X"}),this.state.error]}),Object(n.jsxs)(x.a.Label,{children:["Logged in as: ",this.props.displayName]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-25",children:Object(n.jsx)(x.a.Label,{children:"Title"})}),Object(n.jsx)("div",{className:"col-75",children:Object(n.jsx)(x.a.Control,{type:"text",placeholder:"Enter title",value:this.state.title,onChange:this.handleTitleChange})})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-25",children:Object(n.jsx)(x.a.Label,{children:"Subject"})}),Object(n.jsx)("div",{className:"col-75",children:Object(n.jsx)(x.a.Control,{type:"text",placeholder:"Enter subject",value:this.state.subject,onChange:this.handleSubjectChange})})]}),Object(n.jsx)(x.a.Control,{className:"submit",type:"submit",value:"Submit"})]})})})}}]),s}(s(0).Component),L=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).showModal=function(){n.setState({show:!0}),console.log(n.state.show)},n.hideModal=function(){n.setState({show:!1})},n.state={show:!1},n}return Object(l.a)(s,[{key:"render",value:function(){var e;return!!this.props.isLoggedIn&&(e=Object(n.jsx)(p.a,{variant:"outline-warning",onClick:this.showModal,children:"New post"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(P,{show:this.state.show,handleClose:this.hideModal,user:this.props.user,getPosts:this.props.getPosts}),e]}))}}]),s}(a.Component),P=function(e){var t=e.handleClose,s=e.show,a=e.user,r=e.getPosts,i=s?"modal display-block":"modal display-none";return Object(n.jsx)("div",{className:i,children:Object(n.jsxs)("section",{children:[Object(n.jsx)(N,{displayName:a,handleClose:t,getPosts:r}),Object(n.jsx)(p.a,{onClick:t,className:"close",children:"X"})]})})},E=s(49),I=s(51);function H(){return(H=Object(O.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).HideModal=function(){n.props.handleClose()},n.Register=function(e){(function(e){return H.apply(this,arguments)})(e).then((function(e){console.log(e),localStorage.setItem("token",e.token),n.HideModal()}))},n.state={username:"",email:"",password:"",error:""},n.handlePassChange=n.handlePassChange.bind(Object(h.a)(n)),n.handleUserChange=n.handleUserChange.bind(Object(h.a)(n)),n.handleEmailChange=n.handleEmailChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.dismissError=n.dismissError.bind(Object(h.a)(n)),n}return Object(l.a)(s,[{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!this.state.username)return this.setState({error:"Username is required"});if(!this.state.email)return this.setState({error:"Email is required"});if(!this.state.password)return this.setState({error:"Password is required"});var t={email:this.state.email,displayName:this.state.username,password:this.state.password};return this.Register(t),this.setState({error:""})}},{key:"handleUserChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(x.a,{onSubmit:this.handleSubmit,className:"container",children:[this.state.error&&Object(n.jsxs)("h3",{onClick:this.dismissError,children:[Object(n.jsx)(p.a,{onClick:this.dismissError,children:"X"}),this.state.error]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-25",children:Object(n.jsx)(x.a.Label,{children:"Email"})}),Object(n.jsx)("div",{className:"col-75",children:Object(n.jsx)(x.a.Control,{className:"email",type:"email",value:this.state.email,onChange:this.handleEmailChange})})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-25",children:Object(n.jsx)(x.a.Label,{className:"usernameLabel",children:"Display name"})}),Object(n.jsx)("div",{className:"col-75",children:Object(n.jsx)(x.a.Control,{className:"username",type:"text",value:this.state.username,onChange:this.handleUserChange})})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-25",children:Object(n.jsx)(x.a.Label,{className:"passwordLabel",children:"Password"})}),Object(n.jsx)("div",{className:"col-75",children:Object(n.jsx)(x.a.Control,{className:"password",type:"password",value:this.state.password,onChange:this.handlePassChange})})]}),Object(n.jsx)(x.a.Control,{className:"submit",type:"submit",value:"Register"})]})})}}]),s}(a.Component),T=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).handleChangeValue=function(e){return n.setState({show:e.target.value})},n.showModal=function(){n.setState({show:!0}),console.log(n.state.show)},n.hideModal=function(){n.setState({show:!1})},n.state={show:!1},n}return Object(l.a)(s,[{key:"render",value:function(){var e;return!this.props.isLoggedIn&&(e=Object(n.jsx)(p.a,{variant:"outline-info",onClick:this.showModal,children:"Register"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(U,{show:this.state.show,handleClose:this.hideModal,hideModal:this.hideModal}),e]}))}}]),s}(a.Component),U=function(e){var t=e.handleClose,s=e.show,a=(e.hideModal,s?"modal display-block":"modal display-none");return console.log(a),Object(n.jsx)("div",{className:a,children:Object(n.jsxs)("section",{children:[Object(n.jsx)(M,{show:s,handleClose:t}),Object(n.jsx)(p.a,{onClick:t,className:"close",children:"X"})]})})},A=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){return Object(c.a)(this,s),t.call(this,e)}return Object(l.a)(s,[{key:"render",value:function(){return Object(n.jsx)(E.a,{bg:"dark",variant:"dark",className:"navbar",expand:"lg",children:Object(n.jsxs)(j.a,{children:[Object(n.jsx)(E.a.Brand,{href:"/",children:"Twatter"}),Object(n.jsx)(I.a,{className:"mr-auto navbar-nav",children:Object(n.jsx)(I.a.Link,{href:"/",className:"nav-link",children:"Home"})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:this.props.user}),Object(n.jsx)(S,{loginHandler:this.props.loginHandler,isLoggedIn:this.props.isLoggedIn}),Object(n.jsx)(L,{user:this.props.user,isLoggedIn:this.props.isLoggedIn,getPosts:this.props.getPosts}),Object(n.jsx)(T,{isLoggedIn:this.props.isLoggedIn})]})]})})}}]),s}(s(0).Component);function D(e){var t=new Date(1970,0,1);return t.setSeconds(e),[t.getMonth()+1,t.getDate(),t.getFullYear()].join("/")+" "+[t.getHours(),t.getMinutes(),t.getSeconds()].join(":")}var q=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){return Object(c.a)(this,s),t.call(this,e)}return Object(l.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"list-group",children:this.props.posts.map((function(e,t){return Object(n.jsxs)("a",{href:"#",className:"list-group-item active",children:[Object(n.jsx)("h4",{href:"/profile{post.user}",className:"list-group-item-heading",children:e.user}),Object(n.jsx)("h4",{children:e.title}),Object(n.jsx)("h5",{className:"list-group-item-heading",children:e.post}),Object(n.jsx)("h5",{className:"list-group-item-heading",children:D(e.date._seconds)})]},t)}))})}}]),s}(a.Component);function J(){return(J=Object(O.a)(m.a.mark((function e(t){var s,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=JSON.stringify({token:t}),e.next=3,fetch("/api/isAuth",{method:"POST",headers:{"Content-Type":"application/json"},body:s});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(localStorage.token);var X=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).IsAuthenticated=function(t){t?function(e){return J.apply(this,arguments)}(t).then((function(t){console.log(t),e.setState({user:t.user,isLoggedIn:!0})})):e.setState({user:"Not currently signed in",isLoggedIn:!1})},e.getallPosts=function(){(function(){return f.apply(this,arguments)})().then((function(t){e.setState({posts:t})}))},e.state={user:"",isLoggedIn:!1,posts:[]},e.loginHandler=e.loginHandler.bind(Object(h.a)(e)),e.getAllPostsHandler=e.getAllPostsHandler.bind(Object(h.a)(e)),e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){console.log(localStorage.token),localStorage.token?this.IsAuthenticated(localStorage.token):this.setState({user:"Not currently signed in",isLoggedIn:!1,posts:[]}),this.getallPosts()}},{key:"loginHandler",value:function(){this.IsAuthenticated(localStorage.token)}},{key:"getAllPostsHandler",value:function(){this.getallPosts()}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App-header",children:[Object(n.jsx)(A,{user:this.state.user,loginHandler:this.loginHandler,isLoggedIn:this.state.isLoggedIn,getPosts:this.getAllPostsHandler}),Object(n.jsx)(j.a,{children:Object(n.jsx)(b.a,{children:Object(n.jsx)(q,{posts:this.state.posts})})})]})}}]),s}(a.Component),F=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,52)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),n(e),a(e),r(e),i(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(X,{})}),document.getElementById("root")),F()}},[[45,1,2]]]);
//# sourceMappingURL=main.6747464c.chunk.js.map